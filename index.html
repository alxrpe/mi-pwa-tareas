<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi PWA - Lista de Tareas</title>
    <meta name="description" content="Una aplicaci√≥n PWA sencilla para gestionar tareas">
    <meta name="theme-color" content="#4CAF50">
    
    <!-- OneSignal Meta Tags (REQUERIDAS) -->
    <link rel="manifest" href="/mi-pwa-tareas/manifest.json">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Support -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.svg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Mi PWA">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìù Mi Lista de Tareas</h1>
            <p>Una PWA sencilla para organizar tus tareas</p>
        </header>

        <main>
            <div class="add-task">
                <input type="text" id="taskInput" placeholder="A√±adir nueva tarea..." maxlength="100">
                <button id="addBtn">‚ûï A√±adir</button>
            </div>

            <div class="task-stats">
                <span id="taskCount">0 tareas</span>
                <span id="completedCount">0 completadas</span>
            </div>

            <ul id="taskList" class="task-list">
                <!-- Las tareas se a√±adir√°n din√°micamente aqu√≠ -->
            </ul>

            <div class="empty-state" id="emptyState">
                <p>üéâ ¬°No hay tareas pendientes!</p>
                <small>A√±ade una nueva tarea para comenzar</small>
            </div>
        </main>

        <footer>
            <div class="pwa-info">
                <p>üí° <strong>Tip:</strong> Instala esta app en tu dispositivo para usarla offline</p>
                <div class="action-buttons">
                    <button id="installBtn" class="install-btn" style="display: none;">
                        üì± Instalar App
                    </button>
                    <button id="notificationBtn" class="notification-btn">
                        üîî Activar Notificaciones
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <!-- OneSignal SDK v16 (Actualizado) -->
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "750dbc4d-03cd-4311-840d-471bd5059011",
          safari_web_id: "web.onesignal.auto.599df49f-4478-46e8-9089-3c95d63b63cf",
          allowLocalhostAsSecureOrigin: true,
          notifyButton: {
            enable: false,
          },
        });
        
        // Hacer OneSignal disponible globalmente
        window.OneSignalInstance = OneSignal;
        window.isOneSignalReady = true;
        
        console.log('OneSignal inicializado desde HTML');
      });
    </script>
    
    <script src="app.js"></script>
    <script>
        // OneSignal se registra autom√°ticamente
        // No necesita registro manual de Service Worker
        console.log('OneSignal se inicializar√° autom√°ticamente');
    </script>
</body>
</html>